/*
 * Copyright 2024 Ashampoo GmbH & Co. KG
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
package com.ashampoo.kim.format.jpeg

import com.ashampoo.kim.common.toUInt16
import com.ashampoo.kim.format.jpeg.JpegConstants.JPEG_BYTE_ORDER
import com.ashampoo.kim.input.ByteArrayByteReader
import com.ashampoo.kim.testdata.KimTestData
import kotlin.test.Test
import kotlin.test.assertEquals

class JpegSegmentAnalyzerTest {

    val expectedMap = mapOf<Int, List<JpegSegmentAnalyzer.JpegSegmentInfo>>(
        1 to listOf(
            JpegSegmentAnalyzer.JpegSegmentInfo(0, 65496, 2),
            JpegSegmentAnalyzer.JpegSegmentInfo(2, 65504, 18),
            JpegSegmentAnalyzer.JpegSegmentInfo(20, 65505, 6650),
            JpegSegmentAnalyzer.JpegSegmentInfo(6670, 65517, 148),
            JpegSegmentAnalyzer.JpegSegmentInfo(6818, 65505, 11019),
            JpegSegmentAnalyzer.JpegSegmentInfo(17837, 65506, 8958),
            JpegSegmentAnalyzer.JpegSegmentInfo(26795, 65499, 69),
            JpegSegmentAnalyzer.JpegSegmentInfo(26864, 65499, 69),
            JpegSegmentAnalyzer.JpegSegmentInfo(26933, 65472, 19),
            JpegSegmentAnalyzer.JpegSegmentInfo(26952, 65476, 32),
            JpegSegmentAnalyzer.JpegSegmentInfo(26984, 65476, 83),
            JpegSegmentAnalyzer.JpegSegmentInfo(27067, 65476, 31),
            JpegSegmentAnalyzer.JpegSegmentInfo(27098, 65476, 73),
            JpegSegmentAnalyzer.JpegSegmentInfo(27171, 65498, 3938708),
            JpegSegmentAnalyzer.JpegSegmentInfo(3965879, 65497, 2),
        ),
        2 to listOf(
            JpegSegmentAnalyzer.JpegSegmentInfo(0, 65496, 2),
            JpegSegmentAnalyzer.JpegSegmentInfo(2, 65504, 18),
            JpegSegmentAnalyzer.JpegSegmentInfo(20, 65505, 10828),
            JpegSegmentAnalyzer.JpegSegmentInfo(10848, 65506, 690),
            JpegSegmentAnalyzer.JpegSegmentInfo(11538, 65517, 210),
            JpegSegmentAnalyzer.JpegSegmentInfo(11748, 65499, 69),
            JpegSegmentAnalyzer.JpegSegmentInfo(11817, 65499, 69),
            JpegSegmentAnalyzer.JpegSegmentInfo(11886, 65474, 19),
            JpegSegmentAnalyzer.JpegSegmentInfo(11905, 65476, 31),
            JpegSegmentAnalyzer.JpegSegmentInfo(11936, 65476, 28),
            JpegSegmentAnalyzer.JpegSegmentInfo(11964, 65498, 651073),
            JpegSegmentAnalyzer.JpegSegmentInfo(663037, 65497, 2),
        ),
        3 to listOf(
            JpegSegmentAnalyzer.JpegSegmentInfo(0, 65496, 2),
            JpegSegmentAnalyzer.JpegSegmentInfo(2, 65505, 13010),
            JpegSegmentAnalyzer.JpegSegmentInfo(13012, 65517, 12292),
            JpegSegmentAnalyzer.JpegSegmentInfo(25304, 65506, 3162),
            JpegSegmentAnalyzer.JpegSegmentInfo(28466, 65505, 28164),
            JpegSegmentAnalyzer.JpegSegmentInfo(56630, 65518, 16),
            JpegSegmentAnalyzer.JpegSegmentInfo(56646, 65499, 69),
            JpegSegmentAnalyzer.JpegSegmentInfo(56715, 65499, 69),
            JpegSegmentAnalyzer.JpegSegmentInfo(56784, 65472, 19),
            JpegSegmentAnalyzer.JpegSegmentInfo(56803, 65476, 33),
            JpegSegmentAnalyzer.JpegSegmentInfo(56836, 65476, 90),
            JpegSegmentAnalyzer.JpegSegmentInfo(56926, 65476, 31),
            JpegSegmentAnalyzer.JpegSegmentInfo(56957, 65476, 58),
            JpegSegmentAnalyzer.JpegSegmentInfo(57015, 65498, 948898),
            JpegSegmentAnalyzer.JpegSegmentInfo(1005913, 65497, 2),
        ),
        4 to listOf(
            JpegSegmentAnalyzer.JpegSegmentInfo(0, 65496, 2),
            JpegSegmentAnalyzer.JpegSegmentInfo(2, 65505, 8670),
            JpegSegmentAnalyzer.JpegSegmentInfo(8672, 65517, 8052),
            JpegSegmentAnalyzer.JpegSegmentInfo(16724, 65506, 566),
            JpegSegmentAnalyzer.JpegSegmentInfo(17290, 65505, 14667),
            JpegSegmentAnalyzer.JpegSegmentInfo(31957, 65499, 134),
            JpegSegmentAnalyzer.JpegSegmentInfo(32091, 65501, 6),
            JpegSegmentAnalyzer.JpegSegmentInfo(32097, 65518, 16),
            JpegSegmentAnalyzer.JpegSegmentInfo(32113, 65472, 19),
            JpegSegmentAnalyzer.JpegSegmentInfo(32132, 65476, 154),
            JpegSegmentAnalyzer.JpegSegmentInfo(32286, 65498, 1170231),
            JpegSegmentAnalyzer.JpegSegmentInfo(1202517, 65497, 2),
        ),
        5 to listOf(
            JpegSegmentAnalyzer.JpegSegmentInfo(0, 65496, 2),
            JpegSegmentAnalyzer.JpegSegmentInfo(2, 65505, 13494),
            JpegSegmentAnalyzer.JpegSegmentInfo(13496, 65517, 12740),
            JpegSegmentAnalyzer.JpegSegmentInfo(26236, 65506, 3162),
            JpegSegmentAnalyzer.JpegSegmentInfo(29398, 65505, 16372),
            JpegSegmentAnalyzer.JpegSegmentInfo(45770, 65518, 16),
            JpegSegmentAnalyzer.JpegSegmentInfo(45786, 65534, 54),
            JpegSegmentAnalyzer.JpegSegmentInfo(45840, 65499, 69),
            JpegSegmentAnalyzer.JpegSegmentInfo(45909, 65499, 69),
            JpegSegmentAnalyzer.JpegSegmentInfo(45978, 65472, 19),
            JpegSegmentAnalyzer.JpegSegmentInfo(45997, 65476, 30),
            JpegSegmentAnalyzer.JpegSegmentInfo(46027, 65476, 78),
            JpegSegmentAnalyzer.JpegSegmentInfo(46105, 65476, 28),
            JpegSegmentAnalyzer.JpegSegmentInfo(46133, 65476, 45),
            JpegSegmentAnalyzer.JpegSegmentInfo(46178, 65498, 1143108),
            JpegSegmentAnalyzer.JpegSegmentInfo(1189286, 65497, 2),
        ),
        6 to listOf(
            JpegSegmentAnalyzer.JpegSegmentInfo(0, 65496, 2),
            JpegSegmentAnalyzer.JpegSegmentInfo(2, 65505, 12186),
            JpegSegmentAnalyzer.JpegSegmentInfo(12188, 65517, 11592),
            JpegSegmentAnalyzer.JpegSegmentInfo(23780, 65506, 3162),
            JpegSegmentAnalyzer.JpegSegmentInfo(26942, 65505, 13232),
            JpegSegmentAnalyzer.JpegSegmentInfo(40174, 65518, 16),
            JpegSegmentAnalyzer.JpegSegmentInfo(40190, 65499, 69),
            JpegSegmentAnalyzer.JpegSegmentInfo(40259, 65499, 69),
            JpegSegmentAnalyzer.JpegSegmentInfo(40328, 65472, 19),
            JpegSegmentAnalyzer.JpegSegmentInfo(40347, 65476, 31),
            JpegSegmentAnalyzer.JpegSegmentInfo(40378, 65476, 97),
            JpegSegmentAnalyzer.JpegSegmentInfo(40475, 65476, 31),
            JpegSegmentAnalyzer.JpegSegmentInfo(40506, 65476, 72),
            JpegSegmentAnalyzer.JpegSegmentInfo(40578, 65498, 1151436),
            JpegSegmentAnalyzer.JpegSegmentInfo(1192014, 65497, 2),
        ),
        7 to listOf(
            JpegSegmentAnalyzer.JpegSegmentInfo(0, 65496, 2),
            JpegSegmentAnalyzer.JpegSegmentInfo(2, 65505, 9384),
            JpegSegmentAnalyzer.JpegSegmentInfo(9386, 65517, 8900),
            JpegSegmentAnalyzer.JpegSegmentInfo(18286, 65506, 3162),
            JpegSegmentAnalyzer.JpegSegmentInfo(21448, 65505, 18592),
            JpegSegmentAnalyzer.JpegSegmentInfo(40040, 65518, 16),
            JpegSegmentAnalyzer.JpegSegmentInfo(40056, 65499, 134),
            JpegSegmentAnalyzer.JpegSegmentInfo(40190, 65472, 19),
            JpegSegmentAnalyzer.JpegSegmentInfo(40209, 65501, 6),
            JpegSegmentAnalyzer.JpegSegmentInfo(40215, 65476, 420),
            JpegSegmentAnalyzer.JpegSegmentInfo(40635, 65498, 1095574),
            JpegSegmentAnalyzer.JpegSegmentInfo(1136209, 65497, 2),
        ),
        10 to listOf(
            JpegSegmentAnalyzer.JpegSegmentInfo(0, 65496, 2),
            JpegSegmentAnalyzer.JpegSegmentInfo(2, 65505, 15900),
            JpegSegmentAnalyzer.JpegSegmentInfo(15902, 65517, 15200),
            JpegSegmentAnalyzer.JpegSegmentInfo(31102, 65506, 3162),
            JpegSegmentAnalyzer.JpegSegmentInfo(34264, 65505, 13675),
            JpegSegmentAnalyzer.JpegSegmentInfo(47939, 65518, 16),
            JpegSegmentAnalyzer.JpegSegmentInfo(47955, 65534, 54),
            JpegSegmentAnalyzer.JpegSegmentInfo(48009, 65499, 69),
            JpegSegmentAnalyzer.JpegSegmentInfo(48078, 65499, 69),
            JpegSegmentAnalyzer.JpegSegmentInfo(48147, 65472, 19),
            JpegSegmentAnalyzer.JpegSegmentInfo(48166, 65476, 32),
            JpegSegmentAnalyzer.JpegSegmentInfo(48198, 65476, 99),
            JpegSegmentAnalyzer.JpegSegmentInfo(48297, 65476, 30),
            JpegSegmentAnalyzer.JpegSegmentInfo(48327, 65476, 58),
            JpegSegmentAnalyzer.JpegSegmentInfo(48385, 65498, 1341725),
            JpegSegmentAnalyzer.JpegSegmentInfo(1390110, 65497, 2),
        ),
        11 to listOf(
            JpegSegmentAnalyzer.JpegSegmentInfo(0, 65496, 2),
            JpegSegmentAnalyzer.JpegSegmentInfo(2, 65505, 832),
            JpegSegmentAnalyzer.JpegSegmentInfo(834, 65517, 150),
            JpegSegmentAnalyzer.JpegSegmentInfo(984, 65506, 3162),
            JpegSegmentAnalyzer.JpegSegmentInfo(4146, 65505, 5942),
            JpegSegmentAnalyzer.JpegSegmentInfo(10088, 65518, 16),
            JpegSegmentAnalyzer.JpegSegmentInfo(10104, 65534, 54),
            JpegSegmentAnalyzer.JpegSegmentInfo(10158, 65499, 69),
            JpegSegmentAnalyzer.JpegSegmentInfo(10227, 65499, 69),
            JpegSegmentAnalyzer.JpegSegmentInfo(10296, 65472, 19),
            JpegSegmentAnalyzer.JpegSegmentInfo(10315, 65476, 31),
            JpegSegmentAnalyzer.JpegSegmentInfo(10346, 65476, 79),
            JpegSegmentAnalyzer.JpegSegmentInfo(10425, 65476, 30),
            JpegSegmentAnalyzer.JpegSegmentInfo(10455, 65476, 58),
            JpegSegmentAnalyzer.JpegSegmentInfo(10513, 65498, 1542294),
            JpegSegmentAnalyzer.JpegSegmentInfo(1552807, 65497, 2),
        ),
        12 to listOf(
            JpegSegmentAnalyzer.JpegSegmentInfo(0, 65496, 2),
            JpegSegmentAnalyzer.JpegSegmentInfo(2, 65505, 12914),
            JpegSegmentAnalyzer.JpegSegmentInfo(12916, 65517, 12294),
            JpegSegmentAnalyzer.JpegSegmentInfo(25210, 65506, 3162),
            JpegSegmentAnalyzer.JpegSegmentInfo(28372, 65505, 14097),
            JpegSegmentAnalyzer.JpegSegmentInfo(42469, 65518, 16),
            JpegSegmentAnalyzer.JpegSegmentInfo(42485, 65499, 69),
            JpegSegmentAnalyzer.JpegSegmentInfo(42554, 65499, 69),
            JpegSegmentAnalyzer.JpegSegmentInfo(42623, 65472, 19),
            JpegSegmentAnalyzer.JpegSegmentInfo(42642, 65476, 30),
            JpegSegmentAnalyzer.JpegSegmentInfo(42672, 65476, 80),
            JpegSegmentAnalyzer.JpegSegmentInfo(42752, 65476, 29),
            JpegSegmentAnalyzer.JpegSegmentInfo(42781, 65476, 51),
            JpegSegmentAnalyzer.JpegSegmentInfo(42832, 65498, 1148049),
            JpegSegmentAnalyzer.JpegSegmentInfo(1190881, 65497, 2),
        ),
        13 to listOf(
            JpegSegmentAnalyzer.JpegSegmentInfo(0, 65496, 2),
            JpegSegmentAnalyzer.JpegSegmentInfo(2, 65504, 18),
            JpegSegmentAnalyzer.JpegSegmentInfo(20, 65505, 214),
            JpegSegmentAnalyzer.JpegSegmentInfo(234, 65517, 162),
            JpegSegmentAnalyzer.JpegSegmentInfo(396, 65505, 2814),
            JpegSegmentAnalyzer.JpegSegmentInfo(3210, 65499, 69),
            JpegSegmentAnalyzer.JpegSegmentInfo(3279, 65499, 69),
            JpegSegmentAnalyzer.JpegSegmentInfo(3348, 65472, 19),
            JpegSegmentAnalyzer.JpegSegmentInfo(3367, 65476, 30),
            JpegSegmentAnalyzer.JpegSegmentInfo(3397, 65476, 79),
            JpegSegmentAnalyzer.JpegSegmentInfo(3476, 65476, 29),
            JpegSegmentAnalyzer.JpegSegmentInfo(3505, 65476, 58),
            JpegSegmentAnalyzer.JpegSegmentInfo(3563, 65498, 1049051),
            JpegSegmentAnalyzer.JpegSegmentInfo(1052614, 65497, 2),
        ),
        14 to listOf(
            JpegSegmentAnalyzer.JpegSegmentInfo(0, 65496, 2),
            JpegSegmentAnalyzer.JpegSegmentInfo(2, 65504, 18),
            JpegSegmentAnalyzer.JpegSegmentInfo(20, 65505, 76),
            JpegSegmentAnalyzer.JpegSegmentInfo(96, 65517, 112),
            JpegSegmentAnalyzer.JpegSegmentInfo(208, 65505, 2814),
            JpegSegmentAnalyzer.JpegSegmentInfo(3022, 65499, 69),
            JpegSegmentAnalyzer.JpegSegmentInfo(3091, 65499, 69),
            JpegSegmentAnalyzer.JpegSegmentInfo(3160, 65472, 19),
            JpegSegmentAnalyzer.JpegSegmentInfo(3179, 65476, 31),
            JpegSegmentAnalyzer.JpegSegmentInfo(3210, 65476, 84),
            JpegSegmentAnalyzer.JpegSegmentInfo(3294, 65476, 30),
            JpegSegmentAnalyzer.JpegSegmentInfo(3324, 65476, 55),
            JpegSegmentAnalyzer.JpegSegmentInfo(3379, 65498, 216298),
            JpegSegmentAnalyzer.JpegSegmentInfo(219677, 65497, 2),
        ),
        15 to listOf(
            JpegSegmentAnalyzer.JpegSegmentInfo(0, 65496, 2),
            JpegSegmentAnalyzer.JpegSegmentInfo(2, 65504, 18),
            JpegSegmentAnalyzer.JpegSegmentInfo(20, 65505, 36652),
            JpegSegmentAnalyzer.JpegSegmentInfo(36672, 65517, 76),
            JpegSegmentAnalyzer.JpegSegmentInfo(36748, 65505, 2947),
            JpegSegmentAnalyzer.JpegSegmentInfo(39695, 65506, 4096),
            JpegSegmentAnalyzer.JpegSegmentInfo(43791, 65499, 69),
            JpegSegmentAnalyzer.JpegSegmentInfo(43860, 65499, 69),
            JpegSegmentAnalyzer.JpegSegmentInfo(43929, 65472, 19),
            JpegSegmentAnalyzer.JpegSegmentInfo(43948, 65476, 30),
            JpegSegmentAnalyzer.JpegSegmentInfo(43978, 65476, 74),
            JpegSegmentAnalyzer.JpegSegmentInfo(44052, 65476, 28),
            JpegSegmentAnalyzer.JpegSegmentInfo(44080, 65476, 46),
            JpegSegmentAnalyzer.JpegSegmentInfo(44126, 65498, 1551863),
            JpegSegmentAnalyzer.JpegSegmentInfo(1595989, 65497, 2),
        ),
        16 to listOf(
            JpegSegmentAnalyzer.JpegSegmentInfo(0, 65496, 2),
            JpegSegmentAnalyzer.JpegSegmentInfo(2, 65505, 19000),
            JpegSegmentAnalyzer.JpegSegmentInfo(19002, 65517, 18424),
            JpegSegmentAnalyzer.JpegSegmentInfo(37426, 65506, 3162),
            JpegSegmentAnalyzer.JpegSegmentInfo(40588, 65505, 15566),
            JpegSegmentAnalyzer.JpegSegmentInfo(56154, 65518, 16),
            JpegSegmentAnalyzer.JpegSegmentInfo(56170, 65499, 69),
            JpegSegmentAnalyzer.JpegSegmentInfo(56239, 65499, 69),
            JpegSegmentAnalyzer.JpegSegmentInfo(56308, 65472, 19),
            JpegSegmentAnalyzer.JpegSegmentInfo(56327, 65476, 30),
            JpegSegmentAnalyzer.JpegSegmentInfo(56357, 65476, 74),
            JpegSegmentAnalyzer.JpegSegmentInfo(56431, 65476, 30),
            JpegSegmentAnalyzer.JpegSegmentInfo(56461, 65476, 71),
            JpegSegmentAnalyzer.JpegSegmentInfo(56532, 65498, 1160100),
            JpegSegmentAnalyzer.JpegSegmentInfo(1216632, 65497, 2),
        ),
        17 to listOf(
            JpegSegmentAnalyzer.JpegSegmentInfo(0, 65496, 2),
            JpegSegmentAnalyzer.JpegSegmentInfo(2, 65505, 292),
            JpegSegmentAnalyzer.JpegSegmentInfo(294, 65505, 2999),
            JpegSegmentAnalyzer.JpegSegmentInfo(3293, 65517, 118),
            JpegSegmentAnalyzer.JpegSegmentInfo(3411, 65505, 46),
            JpegSegmentAnalyzer.JpegSegmentInfo(3457, 65518, 16),
            JpegSegmentAnalyzer.JpegSegmentInfo(3473, 65499, 69),
            JpegSegmentAnalyzer.JpegSegmentInfo(3542, 65499, 69),
            JpegSegmentAnalyzer.JpegSegmentInfo(3611, 65472, 19),
            JpegSegmentAnalyzer.JpegSegmentInfo(3630, 65476, 31),
            JpegSegmentAnalyzer.JpegSegmentInfo(3661, 65476, 93),
            JpegSegmentAnalyzer.JpegSegmentInfo(3754, 65476, 29),
            JpegSegmentAnalyzer.JpegSegmentInfo(3783, 65476, 55),
            JpegSegmentAnalyzer.JpegSegmentInfo(3838, 65498, 1203907),
            JpegSegmentAnalyzer.JpegSegmentInfo(1207745, 65497, 2),
        ),
        20 to listOf(
            JpegSegmentAnalyzer.JpegSegmentInfo(0, 65496, 2),
            JpegSegmentAnalyzer.JpegSegmentInfo(2, 65504, 18),
            JpegSegmentAnalyzer.JpegSegmentInfo(20, 65505, 6996),
            JpegSegmentAnalyzer.JpegSegmentInfo(7016, 65499, 69),
            JpegSegmentAnalyzer.JpegSegmentInfo(7085, 65499, 69),
            JpegSegmentAnalyzer.JpegSegmentInfo(7154, 65534, 122),
            JpegSegmentAnalyzer.JpegSegmentInfo(7276, 65474, 19),
            JpegSegmentAnalyzer.JpegSegmentInfo(7295, 65476, 30),
            JpegSegmentAnalyzer.JpegSegmentInfo(7325, 65476, 22),
            JpegSegmentAnalyzer.JpegSegmentInfo(7347, 65498, 5549),
            JpegSegmentAnalyzer.JpegSegmentInfo(12896, 65497, 2),
        ),
        21 to listOf(
            JpegSegmentAnalyzer.JpegSegmentInfo(0, 65496, 2),
            JpegSegmentAnalyzer.JpegSegmentInfo(2, 65505, 20881),
            JpegSegmentAnalyzer.JpegSegmentInfo(20883, 65517, 166),
            JpegSegmentAnalyzer.JpegSegmentInfo(21049, 65505, 13312),
            JpegSegmentAnalyzer.JpegSegmentInfo(34361, 65499, 134),
            JpegSegmentAnalyzer.JpegSegmentInfo(34495, 65472, 19),
            JpegSegmentAnalyzer.JpegSegmentInfo(34514, 65476, 420),
            JpegSegmentAnalyzer.JpegSegmentInfo(34934, 65498, 6291058),
            JpegSegmentAnalyzer.JpegSegmentInfo(6325992, 65497, 2),
        ),
        22 to listOf(
            JpegSegmentAnalyzer.JpegSegmentInfo(0, 65496, 2),
            JpegSegmentAnalyzer.JpegSegmentInfo(2, 65505, 8379),
            JpegSegmentAnalyzer.JpegSegmentInfo(8381, 65505, 8498),
            JpegSegmentAnalyzer.JpegSegmentInfo(16879, 65505, 2290),
            JpegSegmentAnalyzer.JpegSegmentInfo(19169, 65506, 3162),
            JpegSegmentAnalyzer.JpegSegmentInfo(22331, 65517, 9392),
            JpegSegmentAnalyzer.JpegSegmentInfo(31723, 65517, 122),
            JpegSegmentAnalyzer.JpegSegmentInfo(31845, 65518, 16),
            JpegSegmentAnalyzer.JpegSegmentInfo(31861, 65534, 54),
            JpegSegmentAnalyzer.JpegSegmentInfo(31915, 65499, 69),
            JpegSegmentAnalyzer.JpegSegmentInfo(31984, 65499, 69),
            JpegSegmentAnalyzer.JpegSegmentInfo(32053, 65472, 19),
            JpegSegmentAnalyzer.JpegSegmentInfo(32072, 65476, 31),
            JpegSegmentAnalyzer.JpegSegmentInfo(32103, 65476, 78),
            JpegSegmentAnalyzer.JpegSegmentInfo(32181, 65476, 28),
            JpegSegmentAnalyzer.JpegSegmentInfo(32209, 65476, 54),
            JpegSegmentAnalyzer.JpegSegmentInfo(32263, 65498, 5038645),
            JpegSegmentAnalyzer.JpegSegmentInfo(5070908, 65497, 2),
        ),
        23 to listOf(
            JpegSegmentAnalyzer.JpegSegmentInfo(0, 65496, 2),
            JpegSegmentAnalyzer.JpegSegmentInfo(2, 65505, 535),
            JpegSegmentAnalyzer.JpegSegmentInfo(537, 65504, 18),
            JpegSegmentAnalyzer.JpegSegmentInfo(555, 65499, 69),
            JpegSegmentAnalyzer.JpegSegmentInfo(624, 65499, 69),
            JpegSegmentAnalyzer.JpegSegmentInfo(693, 65472, 19),
            JpegSegmentAnalyzer.JpegSegmentInfo(712, 65476, 33),
            JpegSegmentAnalyzer.JpegSegmentInfo(745, 65476, 183),
            JpegSegmentAnalyzer.JpegSegmentInfo(928, 65476, 33),
            JpegSegmentAnalyzer.JpegSegmentInfo(961, 65476, 183),
            JpegSegmentAnalyzer.JpegSegmentInfo(1144, 65498, 7709103),
            JpegSegmentAnalyzer.JpegSegmentInfo(7710247, 65497, 2),
        ),
        24 to listOf(
            JpegSegmentAnalyzer.JpegSegmentInfo(0, 65496, 2),
            JpegSegmentAnalyzer.JpegSegmentInfo(2, 65505, 11596),
            JpegSegmentAnalyzer.JpegSegmentInfo(11598, 65517, 10942),
            JpegSegmentAnalyzer.JpegSegmentInfo(22540, 65506, 3162),
            JpegSegmentAnalyzer.JpegSegmentInfo(25702, 65505, 13902),
            JpegSegmentAnalyzer.JpegSegmentInfo(39604, 65518, 16),
            JpegSegmentAnalyzer.JpegSegmentInfo(39620, 65499, 69),
            JpegSegmentAnalyzer.JpegSegmentInfo(39689, 65499, 69),
            JpegSegmentAnalyzer.JpegSegmentInfo(39758, 65472, 19),
            JpegSegmentAnalyzer.JpegSegmentInfo(39777, 65476, 32),
            JpegSegmentAnalyzer.JpegSegmentInfo(39809, 65476, 102),
            JpegSegmentAnalyzer.JpegSegmentInfo(39911, 65476, 30),
            JpegSegmentAnalyzer.JpegSegmentInfo(39941, 65476, 76),
            JpegSegmentAnalyzer.JpegSegmentInfo(40017, 65498, 1286743),
            JpegSegmentAnalyzer.JpegSegmentInfo(1326760, 65497, 2),
        ),
        25 to listOf(
            JpegSegmentAnalyzer.JpegSegmentInfo(0, 65496, 2),
            JpegSegmentAnalyzer.JpegSegmentInfo(2, 65505, 7020),
            JpegSegmentAnalyzer.JpegSegmentInfo(7022, 65517, 8736),
            JpegSegmentAnalyzer.JpegSegmentInfo(15758, 65505, 18443),
            JpegSegmentAnalyzer.JpegSegmentInfo(34201, 65506, 578),
            JpegSegmentAnalyzer.JpegSegmentInfo(34779, 65518, 16),
            JpegSegmentAnalyzer.JpegSegmentInfo(34795, 65499, 69),
            JpegSegmentAnalyzer.JpegSegmentInfo(34864, 65499, 69),
            JpegSegmentAnalyzer.JpegSegmentInfo(34933, 65472, 19),
            JpegSegmentAnalyzer.JpegSegmentInfo(34952, 65476, 30),
            JpegSegmentAnalyzer.JpegSegmentInfo(34982, 65476, 89),
            JpegSegmentAnalyzer.JpegSegmentInfo(35071, 65476, 30),
            JpegSegmentAnalyzer.JpegSegmentInfo(35101, 65476, 58),
            JpegSegmentAnalyzer.JpegSegmentInfo(35159, 65498, 1517109),
            JpegSegmentAnalyzer.JpegSegmentInfo(1552268, 65497, 2),
        ),
        26 to listOf(
            JpegSegmentAnalyzer.JpegSegmentInfo(0, 65496, 2),
            JpegSegmentAnalyzer.JpegSegmentInfo(2, 65504, 18),
            JpegSegmentAnalyzer.JpegSegmentInfo(20, 65517, 212),
            JpegSegmentAnalyzer.JpegSegmentInfo(232, 65506, 3162),
            JpegSegmentAnalyzer.JpegSegmentInfo(3394, 65505, 832),
            JpegSegmentAnalyzer.JpegSegmentInfo(4226, 65505, 11239),
            JpegSegmentAnalyzer.JpegSegmentInfo(15465, 65499, 69),
            JpegSegmentAnalyzer.JpegSegmentInfo(15534, 65499, 69),
            JpegSegmentAnalyzer.JpegSegmentInfo(15603, 65472, 19),
            JpegSegmentAnalyzer.JpegSegmentInfo(15622, 65476, 31),
            JpegSegmentAnalyzer.JpegSegmentInfo(15653, 65476, 86),
            JpegSegmentAnalyzer.JpegSegmentInfo(15739, 65476, 30),
            JpegSegmentAnalyzer.JpegSegmentInfo(15769, 65476, 67),
            JpegSegmentAnalyzer.JpegSegmentInfo(15836, 65498, 810641),
            JpegSegmentAnalyzer.JpegSegmentInfo(826477, 65497, 2),
        ),
        27 to listOf(
            JpegSegmentAnalyzer.JpegSegmentInfo(0, 65496, 2),
            JpegSegmentAnalyzer.JpegSegmentInfo(2, 65505, 10636),
            JpegSegmentAnalyzer.JpegSegmentInfo(10638, 65517, 9956),
            JpegSegmentAnalyzer.JpegSegmentInfo(20594, 65506, 3162),
            JpegSegmentAnalyzer.JpegSegmentInfo(23756, 65505, 11510),
            JpegSegmentAnalyzer.JpegSegmentInfo(35266, 65518, 16),
            JpegSegmentAnalyzer.JpegSegmentInfo(35282, 65499, 69),
            JpegSegmentAnalyzer.JpegSegmentInfo(35351, 65499, 69),
            JpegSegmentAnalyzer.JpegSegmentInfo(35420, 65472, 19),
            JpegSegmentAnalyzer.JpegSegmentInfo(35439, 65476, 31),
            JpegSegmentAnalyzer.JpegSegmentInfo(35470, 65476, 88),
            JpegSegmentAnalyzer.JpegSegmentInfo(35558, 65476, 30),
            JpegSegmentAnalyzer.JpegSegmentInfo(35588, 65476, 80),
            JpegSegmentAnalyzer.JpegSegmentInfo(35668, 65498, 1255701),
            JpegSegmentAnalyzer.JpegSegmentInfo(1291369, 65497, 2),
        ),
        28 to listOf(
            JpegSegmentAnalyzer.JpegSegmentInfo(0, 65496, 2),
            JpegSegmentAnalyzer.JpegSegmentInfo(2, 65505, 22208),
            JpegSegmentAnalyzer.JpegSegmentInfo(22210, 65517, 104),
            JpegSegmentAnalyzer.JpegSegmentInfo(22314, 65505, 2814),
            JpegSegmentAnalyzer.JpegSegmentInfo(25128, 65499, 69),
            JpegSegmentAnalyzer.JpegSegmentInfo(25197, 65499, 69),
            JpegSegmentAnalyzer.JpegSegmentInfo(25266, 65472, 19),
            JpegSegmentAnalyzer.JpegSegmentInfo(25285, 65476, 31),
            JpegSegmentAnalyzer.JpegSegmentInfo(25316, 65476, 75),
            JpegSegmentAnalyzer.JpegSegmentInfo(25391, 65476, 30),
            JpegSegmentAnalyzer.JpegSegmentInfo(25421, 65476, 61),
            JpegSegmentAnalyzer.JpegSegmentInfo(25482, 65498, 264305),
            JpegSegmentAnalyzer.JpegSegmentInfo(289787, 65497, 2),
        ),
        29 to listOf(
            JpegSegmentAnalyzer.JpegSegmentInfo(0, 65496, 2),
            JpegSegmentAnalyzer.JpegSegmentInfo(2, 65505, 5628),
            JpegSegmentAnalyzer.JpegSegmentInfo(5630, 65517, 7044),
            JpegSegmentAnalyzer.JpegSegmentInfo(12674, 65505, 13188),
            JpegSegmentAnalyzer.JpegSegmentInfo(25862, 65506, 3162),
            JpegSegmentAnalyzer.JpegSegmentInfo(29024, 65518, 40),
            JpegSegmentAnalyzer.JpegSegmentInfo(29064, 65534, 54),
            JpegSegmentAnalyzer.JpegSegmentInfo(29118, 65499, 69),
            JpegSegmentAnalyzer.JpegSegmentInfo(29187, 65499, 69),
            JpegSegmentAnalyzer.JpegSegmentInfo(29256, 65474, 19),
            JpegSegmentAnalyzer.JpegSegmentInfo(29275, 65476, 30),
            JpegSegmentAnalyzer.JpegSegmentInfo(29305, 65476, 28),
            JpegSegmentAnalyzer.JpegSegmentInfo(29333, 65498, 1589969),
            JpegSegmentAnalyzer.JpegSegmentInfo(1619302, 65497, 2),
        ),
        30 to listOf(
            JpegSegmentAnalyzer.JpegSegmentInfo(0, 65496, 2),
            JpegSegmentAnalyzer.JpegSegmentInfo(2, 65505, 4842),
            JpegSegmentAnalyzer.JpegSegmentInfo(4844, 65505, 130),
            JpegSegmentAnalyzer.JpegSegmentInfo(4974, 65505, 130),
            JpegSegmentAnalyzer.JpegSegmentInfo(5104, 65506, 3162),
            JpegSegmentAnalyzer.JpegSegmentInfo(8266, 65517, 9392),
            JpegSegmentAnalyzer.JpegSegmentInfo(17658, 65517, 122),
            JpegSegmentAnalyzer.JpegSegmentInfo(17780, 65518, 16),
            JpegSegmentAnalyzer.JpegSegmentInfo(17796, 65534, 54),
            JpegSegmentAnalyzer.JpegSegmentInfo(17850, 65499, 69),
            JpegSegmentAnalyzer.JpegSegmentInfo(17919, 65499, 69),
            JpegSegmentAnalyzer.JpegSegmentInfo(17988, 65472, 19),
            JpegSegmentAnalyzer.JpegSegmentInfo(18007, 65476, 31),
            JpegSegmentAnalyzer.JpegSegmentInfo(18038, 65476, 78),
            JpegSegmentAnalyzer.JpegSegmentInfo(18116, 65476, 28),
            JpegSegmentAnalyzer.JpegSegmentInfo(18144, 65476, 54),
            JpegSegmentAnalyzer.JpegSegmentInfo(18198, 65498, 5038645),
            JpegSegmentAnalyzer.JpegSegmentInfo(5056843, 65497, 2),
        ),
        31 to listOf(
            JpegSegmentAnalyzer.JpegSegmentInfo(0, 65496, 2),
            JpegSegmentAnalyzer.JpegSegmentInfo(2, 65505, 18040),
            JpegSegmentAnalyzer.JpegSegmentInfo(18042, 65517, 114),
            JpegSegmentAnalyzer.JpegSegmentInfo(18156, 65505, 2814),
            JpegSegmentAnalyzer.JpegSegmentInfo(20970, 65499, 69),
            JpegSegmentAnalyzer.JpegSegmentInfo(21039, 65499, 69),
            JpegSegmentAnalyzer.JpegSegmentInfo(21108, 65472, 19),
            JpegSegmentAnalyzer.JpegSegmentInfo(21127, 65476, 30),
            JpegSegmentAnalyzer.JpegSegmentInfo(21157, 65476, 88),
            JpegSegmentAnalyzer.JpegSegmentInfo(21245, 65476, 28),
            JpegSegmentAnalyzer.JpegSegmentInfo(21273, 65476, 46),
            JpegSegmentAnalyzer.JpegSegmentInfo(21319, 65498, 1751816),
            JpegSegmentAnalyzer.JpegSegmentInfo(1773135, 65497, 2),
        ),
        32 to listOf(
            JpegSegmentAnalyzer.JpegSegmentInfo(0, 65496, 2),
            JpegSegmentAnalyzer.JpegSegmentInfo(2, 65505, 9798),
            JpegSegmentAnalyzer.JpegSegmentInfo(9800, 65517, 9720),
            JpegSegmentAnalyzer.JpegSegmentInfo(19520, 65506, 3162),
            JpegSegmentAnalyzer.JpegSegmentInfo(22682, 65505, 3447),
            JpegSegmentAnalyzer.JpegSegmentInfo(26129, 65518, 16),
            JpegSegmentAnalyzer.JpegSegmentInfo(26145, 65534, 54),
            JpegSegmentAnalyzer.JpegSegmentInfo(26199, 65499, 69),
            JpegSegmentAnalyzer.JpegSegmentInfo(26268, 65499, 69),
            JpegSegmentAnalyzer.JpegSegmentInfo(26337, 65472, 19),
            JpegSegmentAnalyzer.JpegSegmentInfo(26356, 65476, 30),
            JpegSegmentAnalyzer.JpegSegmentInfo(26386, 65476, 81),
            JpegSegmentAnalyzer.JpegSegmentInfo(26467, 65476, 29),
            JpegSegmentAnalyzer.JpegSegmentInfo(26496, 65476, 59),
            JpegSegmentAnalyzer.JpegSegmentInfo(26555, 65498, 933304),
            JpegSegmentAnalyzer.JpegSegmentInfo(959859, 65497, 2),
        ),
        33 to listOf(
            JpegSegmentAnalyzer.JpegSegmentInfo(0, 65496, 2),
            JpegSegmentAnalyzer.JpegSegmentInfo(2, 65505, 13748),
            JpegSegmentAnalyzer.JpegSegmentInfo(13750, 65517, 13028),
            JpegSegmentAnalyzer.JpegSegmentInfo(26778, 65506, 3162),
            JpegSegmentAnalyzer.JpegSegmentInfo(29940, 65505, 11427),
            JpegSegmentAnalyzer.JpegSegmentInfo(41367, 65499, 134),
            JpegSegmentAnalyzer.JpegSegmentInfo(41501, 65501, 6),
            JpegSegmentAnalyzer.JpegSegmentInfo(41507, 65518, 16),
            JpegSegmentAnalyzer.JpegSegmentInfo(41523, 65472, 19),
            JpegSegmentAnalyzer.JpegSegmentInfo(41542, 65476, 195),
            JpegSegmentAnalyzer.JpegSegmentInfo(41737, 65498, 1498590),
            JpegSegmentAnalyzer.JpegSegmentInfo(1540327, 65497, 2),
        ),
        34 to listOf(
            JpegSegmentAnalyzer.JpegSegmentInfo(0, 65496, 2),
            JpegSegmentAnalyzer.JpegSegmentInfo(2, 65504, 18),
            JpegSegmentAnalyzer.JpegSegmentInfo(20, 65505, 12892),
            JpegSegmentAnalyzer.JpegSegmentInfo(12912, 65517, 102),
            JpegSegmentAnalyzer.JpegSegmentInfo(13014, 65505, 2814),
            JpegSegmentAnalyzer.JpegSegmentInfo(15828, 65506, 8702),
            JpegSegmentAnalyzer.JpegSegmentInfo(24530, 65514, 3670),
            JpegSegmentAnalyzer.JpegSegmentInfo(28200, 65499, 69),
            JpegSegmentAnalyzer.JpegSegmentInfo(28269, 65499, 69),
            JpegSegmentAnalyzer.JpegSegmentInfo(28338, 65472, 19),
            JpegSegmentAnalyzer.JpegSegmentInfo(28357, 65476, 30),
            JpegSegmentAnalyzer.JpegSegmentInfo(28387, 65476, 76),
            JpegSegmentAnalyzer.JpegSegmentInfo(28463, 65476, 29),
            JpegSegmentAnalyzer.JpegSegmentInfo(28492, 65476, 46),
            JpegSegmentAnalyzer.JpegSegmentInfo(28538, 65498, 1756223),
            JpegSegmentAnalyzer.JpegSegmentInfo(1784761, 65497, 2),
        ),
        35 to listOf(
            JpegSegmentAnalyzer.JpegSegmentInfo(0, 65496, 2),
            JpegSegmentAnalyzer.JpegSegmentInfo(2, 65505, 12526),
            JpegSegmentAnalyzer.JpegSegmentInfo(12528, 65517, 11826),
            JpegSegmentAnalyzer.JpegSegmentInfo(24354, 65506, 3162),
            JpegSegmentAnalyzer.JpegSegmentInfo(27516, 65505, 14486),
            JpegSegmentAnalyzer.JpegSegmentInfo(42002, 65518, 16),
            JpegSegmentAnalyzer.JpegSegmentInfo(42018, 65534, 54),
            JpegSegmentAnalyzer.JpegSegmentInfo(42072, 65499, 69),
            JpegSegmentAnalyzer.JpegSegmentInfo(42141, 65499, 69),
            JpegSegmentAnalyzer.JpegSegmentInfo(42210, 65472, 19),
            JpegSegmentAnalyzer.JpegSegmentInfo(42229, 65476, 30),
            JpegSegmentAnalyzer.JpegSegmentInfo(42259, 65476, 77),
            JpegSegmentAnalyzer.JpegSegmentInfo(42336, 65476, 29),
            JpegSegmentAnalyzer.JpegSegmentInfo(42365, 65476, 57),
            JpegSegmentAnalyzer.JpegSegmentInfo(42422, 65498, 1215580),
            JpegSegmentAnalyzer.JpegSegmentInfo(1258002, 65497, 2),
        ),
        36 to listOf(
            JpegSegmentAnalyzer.JpegSegmentInfo(0, 65496, 2),
            JpegSegmentAnalyzer.JpegSegmentInfo(2, 65504, 18),
            JpegSegmentAnalyzer.JpegSegmentInfo(20, 65505, 1350),
            JpegSegmentAnalyzer.JpegSegmentInfo(1370, 65505, 4162),
            JpegSegmentAnalyzer.JpegSegmentInfo(5532, 65517, 626),
            JpegSegmentAnalyzer.JpegSegmentInfo(6158, 65506, 614),
            JpegSegmentAnalyzer.JpegSegmentInfo(6772, 65499, 69),
            JpegSegmentAnalyzer.JpegSegmentInfo(6841, 65499, 69),
            JpegSegmentAnalyzer.JpegSegmentInfo(6910, 65472, 19),
            JpegSegmentAnalyzer.JpegSegmentInfo(6929, 65476, 32),
            JpegSegmentAnalyzer.JpegSegmentInfo(6961, 65476, 91),
            JpegSegmentAnalyzer.JpegSegmentInfo(7052, 65476, 31),
            JpegSegmentAnalyzer.JpegSegmentInfo(7083, 65476, 69),
            JpegSegmentAnalyzer.JpegSegmentInfo(7152, 65498, 1628511),
            JpegSegmentAnalyzer.JpegSegmentInfo(1635663, 65497, 2),
        ),
        37 to listOf(
            JpegSegmentAnalyzer.JpegSegmentInfo(0, 65496, 2),
            JpegSegmentAnalyzer.JpegSegmentInfo(2, 65505, 2598),
            JpegSegmentAnalyzer.JpegSegmentInfo(2600, 65517, 43100),
            JpegSegmentAnalyzer.JpegSegmentInfo(45700, 65505, 38195),
            JpegSegmentAnalyzer.JpegSegmentInfo(83895, 65506, 578),
            JpegSegmentAnalyzer.JpegSegmentInfo(84473, 65518, 16),
            JpegSegmentAnalyzer.JpegSegmentInfo(84489, 65499, 69),
            JpegSegmentAnalyzer.JpegSegmentInfo(84558, 65499, 69),
            JpegSegmentAnalyzer.JpegSegmentInfo(84627, 65472, 19),
            JpegSegmentAnalyzer.JpegSegmentInfo(84646, 65476, 31),
            JpegSegmentAnalyzer.JpegSegmentInfo(84677, 65476, 82),
            JpegSegmentAnalyzer.JpegSegmentInfo(84759, 65476, 29),
            JpegSegmentAnalyzer.JpegSegmentInfo(84788, 65476, 61),
            JpegSegmentAnalyzer.JpegSegmentInfo(84849, 65498, 362619),
            JpegSegmentAnalyzer.JpegSegmentInfo(447468, 65497, 2),
        ),
        38 to listOf(
            JpegSegmentAnalyzer.JpegSegmentInfo(0, 65496, 2),
            JpegSegmentAnalyzer.JpegSegmentInfo(2, 65505, 11990),
            JpegSegmentAnalyzer.JpegSegmentInfo(11992, 65517, 13484),
            JpegSegmentAnalyzer.JpegSegmentInfo(25476, 65505, 13073),
            JpegSegmentAnalyzer.JpegSegmentInfo(38549, 65506, 578),
            JpegSegmentAnalyzer.JpegSegmentInfo(39127, 65518, 35),
            JpegSegmentAnalyzer.JpegSegmentInfo(39162, 65499, 69),
            JpegSegmentAnalyzer.JpegSegmentInfo(39231, 65499, 69),
            JpegSegmentAnalyzer.JpegSegmentInfo(39300, 65474, 19),
            JpegSegmentAnalyzer.JpegSegmentInfo(39319, 65476, 32),
            JpegSegmentAnalyzer.JpegSegmentInfo(39351, 65476, 29),
            JpegSegmentAnalyzer.JpegSegmentInfo(39380, 65498, 1317385),
            JpegSegmentAnalyzer.JpegSegmentInfo(1356765, 65497, 2),
        ),
        39 to listOf(
            JpegSegmentAnalyzer.JpegSegmentInfo(0, 65496, 2),
            JpegSegmentAnalyzer.JpegSegmentInfo(2, 65505, 22782),
            JpegSegmentAnalyzer.JpegSegmentInfo(22784, 65505, 2814),
            JpegSegmentAnalyzer.JpegSegmentInfo(25598, 65534, 54),
            JpegSegmentAnalyzer.JpegSegmentInfo(25652, 65499, 69),
            JpegSegmentAnalyzer.JpegSegmentInfo(25721, 65499, 69),
            JpegSegmentAnalyzer.JpegSegmentInfo(25790, 65472, 19),
            JpegSegmentAnalyzer.JpegSegmentInfo(25809, 65476, 31),
            JpegSegmentAnalyzer.JpegSegmentInfo(25840, 65476, 79),
            JpegSegmentAnalyzer.JpegSegmentInfo(25919, 65476, 28),
            JpegSegmentAnalyzer.JpegSegmentInfo(25947, 65476, 44),
            JpegSegmentAnalyzer.JpegSegmentInfo(25991, 65498, 1191901),
            JpegSegmentAnalyzer.JpegSegmentInfo(1217892, 65497, 2),
        ),
        40 to listOf(
            JpegSegmentAnalyzer.JpegSegmentInfo(0, 65496, 2),
            JpegSegmentAnalyzer.JpegSegmentInfo(2, 65505, 4388),
            JpegSegmentAnalyzer.JpegSegmentInfo(4390, 65517, 5864),
            JpegSegmentAnalyzer.JpegSegmentInfo(10254, 65505, 15566),
            JpegSegmentAnalyzer.JpegSegmentInfo(25820, 65506, 3162),
            JpegSegmentAnalyzer.JpegSegmentInfo(28982, 65518, 16),
            JpegSegmentAnalyzer.JpegSegmentInfo(28998, 65499, 69),
            JpegSegmentAnalyzer.JpegSegmentInfo(29067, 65499, 69),
            JpegSegmentAnalyzer.JpegSegmentInfo(29136, 65472, 19),
            JpegSegmentAnalyzer.JpegSegmentInfo(29155, 65476, 30),
            JpegSegmentAnalyzer.JpegSegmentInfo(29185, 65476, 74),
            JpegSegmentAnalyzer.JpegSegmentInfo(29259, 65476, 30),
            JpegSegmentAnalyzer.JpegSegmentInfo(29289, 65476, 59),
            JpegSegmentAnalyzer.JpegSegmentInfo(29348, 65498, 1651935),
            JpegSegmentAnalyzer.JpegSegmentInfo(1681283, 65497, 2),
        ),
        48 to listOf(
            JpegSegmentAnalyzer.JpegSegmentInfo(0, 65496, 2),
            JpegSegmentAnalyzer.JpegSegmentInfo(2, 65505, 13524),
            JpegSegmentAnalyzer.JpegSegmentInfo(13526, 65506, 554),
            JpegSegmentAnalyzer.JpegSegmentInfo(14080, 65499, 134),
            JpegSegmentAnalyzer.JpegSegmentInfo(14214, 65501, 6),
            JpegSegmentAnalyzer.JpegSegmentInfo(14220, 65472, 19),
            JpegSegmentAnalyzer.JpegSegmentInfo(14239, 65476, 420),
            JpegSegmentAnalyzer.JpegSegmentInfo(14659, 65498, 6790271),
            JpegSegmentAnalyzer.JpegSegmentInfo(6804930, 65497, 2),
        ),
        49 to listOf(
            JpegSegmentAnalyzer.JpegSegmentInfo(0, 65496, 2),
            JpegSegmentAnalyzer.JpegSegmentInfo(2, 65505, 20366),
            JpegSegmentAnalyzer.JpegSegmentInfo(20368, 65505, 2562),
            JpegSegmentAnalyzer.JpegSegmentInfo(22930, 65499, 134),
            JpegSegmentAnalyzer.JpegSegmentInfo(23064, 65472, 19),
            JpegSegmentAnalyzer.JpegSegmentInfo(23083, 65476, 420),
            JpegSegmentAnalyzer.JpegSegmentInfo(23503, 65498, 9266056),
            JpegSegmentAnalyzer.JpegSegmentInfo(9289559, 65497, 2),
        ),
        50 to listOf(
            JpegSegmentAnalyzer.JpegSegmentInfo(0, 65496, 2),
            JpegSegmentAnalyzer.JpegSegmentInfo(2, 65505, 65470),
            JpegSegmentAnalyzer.JpegSegmentInfo(65472, 65505, 12288),
            JpegSegmentAnalyzer.JpegSegmentInfo(77760, 65506, 138),
            JpegSegmentAnalyzer.JpegSegmentInfo(77898, 65506, 54),
            JpegSegmentAnalyzer.JpegSegmentInfo(77952, 65506, 44098),
            JpegSegmentAnalyzer.JpegSegmentInfo(122050, 65476, 420),
            JpegSegmentAnalyzer.JpegSegmentInfo(122470, 65499, 134),
            JpegSegmentAnalyzer.JpegSegmentInfo(122604, 65501, 6),
            JpegSegmentAnalyzer.JpegSegmentInfo(122610, 65472, 19),
            JpegSegmentAnalyzer.JpegSegmentInfo(122629, 65498, 14607244),
            JpegSegmentAnalyzer.JpegSegmentInfo(14729873, 65497, 2),
        ),
    )

    /**
     * Regression test based on a fixed small set of test files.
     */
    @OptIn(ExperimentalStdlibApi::class)
    @Test
    fun testFindSegmentInfos() {

        // TODO Refresh data
        val outdatedData = setOf(
            8, 9, 18, 19, 41, 42, 43, 44, 45, 46, 47
        )

        for (index in 1..KimTestData.HIGHEST_JPEG_INDEX) {

            if (outdatedData.contains(index))
                continue

            val bytes = KimTestData.getBytesOf(index)

            val byteReader = ByteArrayByteReader(bytes)

            val segmentInfos = JpegSegmentAnalyzer.findSegmentInfos(byteReader)

            /* Integrity check to prevent persistance of wrong results. */
            assertEquals(
                expected = bytes.size,
                actual = segmentInfos.sumOf { it.length },
                message = "Sum of lengths should match bytes size."
            )

            /* Check that markers are correct. */
            for (segmentInfo in segmentInfos) {

                val offset = segmentInfo.offset.toInt()

                val markerAtOffset = byteArrayOf(
                    bytes[offset],
                    bytes[offset + 1]
                ).toUInt16(JPEG_BYTE_ORDER)

                assertEquals(
                    expected = segmentInfo.marker,
                    actual = markerAtOffset,
                    message = "Unexpected marker."
                )
            }

            /* Compare previously saved results. */
            assertEquals(
                expected = expectedMap.get(index),
                actual = segmentInfos
            )
        }
    }
}
